webpackJsonp([22],{"/iDv":function(s,e){},Vh2b:function(s,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=t("3cXf"),d=t.n(i),o=t("4YfN"),n=t.n(o),a=t("9rMa"),r=t("wSez"),c=t("9yBd"),h=t("UzLt"),u=(t("6iV/"),c.a,h.a,n()({},Object(a.c)(["token","autoAddress","choseAddress"])),n()({},Object(a.b)(["atnAutoAddress","atnChoseAddress"]),{verToken:function(){this.token?this.getAddressesList():(this.showTip("登录超时，请重新登录"),this.$router.push({path:"/mine/login"}))},getAddressesList:function(){var s=this;this.$axios.get(this.api.getaddressList,{headers:{Authorization:this.token}}).then(function(e){var t=e.data;if(console.log(t),1!==t.code||0===t.content.length)return s.noAddresses=!0,void(s.addressesList=[]);s.noAddresses=!1,s.addressesList=t.content,console.log(s.addressesList)}).catch(function(s){})},setAutoAddress:function(s){var e=this;if(console.log(s),!1===s.isChecked){var t={userName:s.userName,phone:s.phone,areaId:s.areaId,address:s.address,areaInfo:s.areaInfo,isChecked:!0,id:s.id};console.log(t),this.$axios.post(this.api.updateAddrData,d()(t),{headers:{Authorization:this.token,"content-type":"application/json"}}).then(function(t){1===t.data.code?(e.atnAutoAddress(s),e.getAddressesList()):e.showTip("设置失败，请重试")}).catch(function(s){e.showTip("设置失败，请重试")})}},pageToAddEdit:function(s,e){this.$router.push("/mine/address"+("edit"===s?"?addressId="+e:""))},delAddress:function(s,e){var t=this;console.log(s,e),Object(r.MessageBox)({title:"删除提示",message:"确定删除这条地址吗？",showCancelButton:!0}).then(function(i){"confirm"===i&&t.$axios.get(t.api.deleteAddr+s,{headers:{Authorization:t.token}}).then(function(i){if(1===i.data.code){t.addressesList.splice(e,1),0===t.addressesList.length&&(t.noAddresses=!0,t.addressesList=[]);var d=t.choseAddress;d&&d.id===s&&t.atnChoseAddress(null)}else t.showTip("删除失败，请重试")}).catch(function(s){t.showTip("删除失败，请重试")})})},selectAddress:function(s){var e=this;"goods"===this.from&&(this.atnChoseAddress(s),setTimeout(function(){e.$router.go(-1)},100))}}),t("6iV/"),{data:function(){return{from:this.getUrlParam("from"),noAddresses:!1,addressesList:[]}},components:{"v-nodata":c.a,vHeader:h.a},computed:n()({},Object(a.c)(["token","autoAddress","choseAddress"])),beforeCreate:function(){document.title="收货地址"},created:function(){this.verToken()},methods:n()({},Object(a.b)(["atnAutoAddress","atnChoseAddress"]),{verToken:function(){this.token?this.getAddressesList():(this.showTip("登录超时，请重新登录"),this.$router.push({path:"/mine/login"}))},getAddressesList:function(){var s=this;this.$axios.get(this.api.getaddressList,{headers:{Authorization:this.token}}).then(function(e){var t=e.data;if(console.log(t),1!==t.code||0===t.content.length)return s.noAddresses=!0,void(s.addressesList=[]);s.noAddresses=!1,s.addressesList=t.content,console.log(s.addressesList)}).catch(function(s){})},setAutoAddress:function(s){var e=this;if(console.log(s),!1===s.isChecked){var t={userName:s.userName,phone:s.phone,areaId:s.areaId,address:s.address,areaInfo:s.areaInfo,isChecked:!0,id:s.id};console.log(t),this.$axios.post(this.api.updateAddrData,d()(t),{headers:{Authorization:this.token,"content-type":"application/json"}}).then(function(t){1===t.data.code?(e.atnAutoAddress(s),e.getAddressesList()):e.showTip("设置失败，请重试")}).catch(function(s){e.showTip("设置失败，请重试")})}},pageToAddEdit:function(s,e){this.$router.push("/mine/address"+("edit"===s?"?addressId="+e:""))},delAddress:function(s,e){var t=this;console.log(s,e),Object(r.MessageBox)({title:"删除提示",message:"确定删除这条地址吗？",showCancelButton:!0}).then(function(i){"confirm"===i&&t.$axios.get(t.api.deleteAddr+s,{headers:{Authorization:t.token}}).then(function(i){if(1===i.data.code){t.addressesList.splice(e,1),0===t.addressesList.length&&(t.noAddresses=!0,t.addressesList=[]);var d=t.choseAddress;d&&d.id===s&&t.atnChoseAddress(null)}else t.showTip("删除失败，请重试")}).catch(function(s){t.showTip("删除失败，请重试")})})},selectAddress:function(s){var e=this;"goods"===this.from&&(this.atnChoseAddress(s),setTimeout(function(){e.$router.go(-1)},100))}})}),l={render:function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"wrapper page-addresses"},[t("vHeader",{attrs:{title:"地址管理"}}),s._v(" "),t("div",{staticClass:"lay-adres mgt50"},[s._l(s.addressesList,function(e,i){return t("div",{key:i,staticClass:"item"},[t("div",{staticClass:"info",on:{click:function(t){s.selectAddress(e)}}},[t("div",{staticClass:"name-phone txt-black fs-14"},[s._v(s._s(e.userName)+" "+s._s(e.phone))]),s._v(" "),t("div",{staticClass:"adres txt-gray mt5 fs-12"},[s._v(s._s(e.areaInfo)+" "+s._s(e.address))])]),s._v(" "),t("div",{staticClass:"acts"},[t("div",{staticClass:"act",on:{click:function(t){s.setAutoAddress(e)}}},[t("i",{staticClass:"ico i-cks",class:{checked:!0===e.isChecked}}),s._v(s._s(!0===e.isChecked?"默认地址":"设为默认")+"\n        ")]),s._v(" "),t("div",{staticClass:"act-box"},[t("div",{staticClass:"act",on:{click:function(t){s.pageToAddEdit("edit",e.id)}}},[t("i",{staticClass:"ico i-edit"}),s._v("编辑\n          ")]),s._v(" "),t("div",{staticClass:"act",on:{click:function(t){s.delAddress(e.id,i)}}},[t("i",{staticClass:"ico i-del"}),s._v("删除\n          ")])])])])}),s._v(" "),s.noAddresses?t("v-nodata",{attrs:{bgcolor:"grey",text:"- 还没有收货地址 -"}}):s._e()],2),s._v(" "),t("div",{staticClass:"lay-action fix-btom"},[t("button",{staticClass:"btn-submit nordu full-screen",on:{click:function(e){s.pageToAddEdit("add")}}},[s._v("+ 添加新地址")])])],1)},staticRenderFns:[]};var f=t("C7Lr")(u,l,!1,function(s){t("/iDv")},null,null);e.default=f.exports}});
//# sourceMappingURL=22.f8489925beb77d3f8d6c.js.map