webpackJsonp([46],{"3Osq":function(a,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=t("3cXf"),i=t.n(s),n=t("4YfN"),r=t.n(n),d=t("9rMa"),o=t("4s6/"),c=t("CKVb"),l=t("gpPJ"),h=t("kEOb"),p=t("UzLt"),u=(t("6iV/"),o.a,h.a,c.a,p.a,l.a,r()({},Object(d.c)(["token"])),t("6iV/"),{data:function(){return{stringValue:"0",value:[],addressId:this.getUrlParam("addressId")||"",addressData:{name:"",phone:"",city:[],adres:""}}},components:{"x-switch":o.a,"v-cell":h.a,group:c.a,vHeader:p.a,Cell:l.a},computed:r()({},Object(d.c)(["token"])),created:function(){var a=this,e=this.addressId;e&&setTimeout(function(){a.getAddressData(e)},0)},methods:{changeData:function(a){a.areaId&&(this.addressData.areaId=a.areaId),this.addressData[a.pro]=a.value,console.log(this.addressData)},getAddressData:function(a){var e=this;this.$axios.get(this.api.getAddrData+a,{headers:{Authorization:this.token}}).then(function(a){var t=a.data;if(1===t.code){var s=t.content;e.addressData.name=s.userName,e.addressData.phone=s.phone,e.addressData.city=s.areaInfo.split(" "),e.addressData.adres=s.address,e.stringValue=s.isChecked?"1":"0"}else e.showTip("读取来源地址失败")}).catch(function(a){e.showTip("读取来源地址失败")})},saveAddress:function(){var a=this,e=this.addressId,t=this.addressData;if(console.log(t.areaId),""!==t.name)if(11===t.phone.length)if(0!==t.city.length)if(""!==t.adres){var s="新增收货地址成功",n="新增收货地址失败",r=this.api.addAddr,d={userName:t.name,phone:t.phone,areaId:Number(t.areaId),address:t.adres,areaInfo:t.city[0]+" "+t.city[1]+" "+t.city[2],isChecked:Number(this.stringValue)};e&&(s="修改收货地址成功",n="修改收货地址失败",r=this.api.updateAddrData,d.id=e),this.$axios.post(r,i()(d),{headers:{Authorization:this.token,"content-type":"application/json"}}).then(function(e){1===e.data.code?(a.showTip(s,1500,"ok"),setTimeout(function(){a.$router.go(-1)},1600)):a.showTip(n)}).catch(function(e){a.showTip(n)})}else this.showTip("请填写详细收货地址");else this.showTip("请选择收货省市区");else this.showTip("请输入正确的手机号码格式");else this.showTip("请填写收货人姓名")}}}),g={render:function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{staticClass:"wrapper page-address"},[t("vHeader",{attrs:{title:"地址管理"}}),a._v(" "),t("div",{staticClass:"lay-adres mgt50"},[t("v-cell",{attrs:{type:"input",title:"联系人",place:"收货人姓名",pro:"name",iptCon:a.addressData.name},on:{iptChange:a.changeData}}),a._v(" "),t("v-cell",{attrs:{type:"input",title:"电话",place:"收货人手机号码",pro:"phone",iptCon:a.addressData.phone},on:{iptChange:a.changeData}}),a._v(" "),t("v-cell",{attrs:{type:"region",title:"城市",pro:"city",address:a.addressData.city},on:{iptChange:a.changeData}}),a._v(" "),t("v-cell",{attrs:{type:"input",title:"详细地址",place:"街道/小区/楼栋/序号",pro:"adres",iptCon:a.addressData.adres},on:{iptChange:a.changeData}}),a._v(" "),t("group",[t("x-switch",{attrs:{title:"默认地址","value-map":["0","1"]},model:{value:a.stringValue,callback:function(e){a.stringValue=e},expression:"stringValue"}})],1)],1),a._v(" "),t("div",{staticClass:"lay-action fix-btom"},[t("button",{staticClass:"btn-submit nordu full-screen",on:{click:a.saveAddress}},[a._v("保 存")])])],1)},staticRenderFns:[]};var v=t("C7Lr")(u,g,!1,function(a){t("gJGX")},null,null);e.default=v.exports},gJGX:function(a,e){}});
//# sourceMappingURL=46.66b620f001c47a11f90b.js.map