webpackJsonp([44],{"c+yx":function(t,e){},zZlh:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("4YfN"),i=n.n(o),s=n("9yBd"),r=n("DeJQ"),a=n("9rMa"),c=n("wSez"),d=(s.a,r.a,i()({},Object(a.c)(["token"])),{data:function(){return{serveOrderInfo:null,noJunior:!1,juniorList:[]}},components:{"v-nodata":s.a,"v-tagcon":r.a},computed:i()({},Object(a.c)(["token"])),beforeCreate:function(){document.title="分配"},created:function(){this.serveOrderInfo=JSON.parse(window.localStorage.getItem("serveOrderInfo")),this.getJuniorList()},methods:{getJuniorList:function(){var t=this;this.$axios.get(this.api.getJuniors,{headers:{Authorization:this.token},params:{order_id:this.serveOrderInfo.orderId}}).then(function(e){var n=e.data;if(1!==n.code)return t.showTip(n.message),void(t.noJunior=!0);var o=n.content||[];0!==o.length?(o.forEach(function(t,e){t.checked=0===e}),t.juniorList=o):t.noJunior=!0}).catch(function(e){t.showTip("获取服务点失败"),t.noJunior=!0})},choseJunior:function(t,e){var n=this.juniorList;t.checked||(n.forEach(function(t){t.checked=!1}),t.checked=!0)},orderToJunior:function(){var t=this,e=Object(c.Toast)({message:"分配中...",iconClass:"loading",duration:1e4}),n=this.serveOrderInfo.orderId,o=this.juniorList.filter(function(t){return!0===t.checked})[0].siteId;this.$axios.get(this.api.seniorToJunior,{headers:{Authorization:this.token},params:{order_id:n,site_id:o}}).then(function(n){e.close();var o=n.data;1===o.code?(t.showTip("订单分配成功！",2e3,"ok"),setTimeout(function(){t.$router.go(-2)},2e3)):t.showTip(o.message)}).catch(function(n){e.close(),t.showTip("分配失败，请重试")})}}}),u={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrapper page-seniorgrant"},[t.serveOrderInfo?n("div",{staticClass:"lay-info"},[n("v-tagcon",{attrs:{title:"订单号",con:t.serveOrderInfo.orderNo}}),t._v(" "),n("v-tagcon",{attrs:{title:"订单地址",con:t.serveOrderInfo.orderAddress,nobdr:!0,more:!0}})],1):t._e(),t._v(" "),t.juniorList.length>0?n("div",{staticClass:"lay-junior white"},[n("p",{staticClass:"tag"},[t._v("服务点")]),t._v(" "),t._l(t.juniorList,function(e,o){return n("div",{key:o,staticClass:"item",on:{click:function(n){t.choseJunior(e,o)}}},[n("i",{staticClass:"ico i-cks",class:{checked:e.checked}}),t._v(" "),n("p",{staticClass:"address elips"},[t._v(t._s(e.siteAddress))]),t._v(" "),n("p",{staticClass:"distance"},[t._v("\n        距收货地址\n        "),n("span",{staticClass:"num"},[t._v(t._s(e.distance||"--")+"km")])])])})],2):t._e(),t._v(" "),t.noJunior?n("v-nodata",{attrs:{bgcolor:"grey",text:"- 暂无服务点 -"}}):t._e(),t._v(" "),n("div",{staticClass:"lay-action"},[n("button",{staticClass:"btn-submit",on:{click:t.orderToJunior}},[t._v("确定分配")])])],1)},staticRenderFns:[]};var h=n("C7Lr")(d,u,!1,function(t){n("c+yx")},null,null);e.default=h.exports}});
//# sourceMappingURL=44.f902389eb2508cfc637b.js.map