webpackJsonp([32],{a8hV:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e("IHPB"),l=e.n(a),o=e("4YfN"),i=e.n(o),n=e("9rMa"),u=e("f/tg"),r=e("Gsn1"),c=e("XzeJ"),p=e("5CvF"),d=e("4rfY"),m=e("UzLt"),h=(e("6iV/"),m.a,r.a,u.a,c.a,p.a,d.a,i()({},Object(n.c)(["token","city","location"])),e("6iV/")),f={data:function(){return{id:this.getUrlParam("id"),className:this.getUrlParam("className"),urlPic:this.api.urlPic,boxShow:!1,storeName:"",totalPage:1,currentPage:0,listData:[],loadMoreVal:!0,pullupEnabled:!0,status:{pullupStatus:"default"}}},components:{vHeader:m.a,Scroller:r.a,Rater:u.a,Spinner:c.a,Flexbox:p.a,FlexboxItem:d.a},computed:i()({},Object(n.c)(["token","city","location"])),mounted:function(){},created:function(){this.loadMore()},methods:{loadMore:function(){var t=this;this.loadMoreVal&&(this.loadMoreVal=!1,setTimeout(function(){t.loadMoreVal=!0},1e3),console.log(this.location),this.currentPage<this.totalPage?(this.currentPage=parseInt(this.currentPage)+1,this.$axios.post(this.api.sellerstoreList,h.parse({sellerClassId:this.id,latitude:this.location.lat,longitude:this.location.lng,page:this.currentPage,limit:8}),{headers:{"content-type":"application/json"}}).then(function(s){console.log(s.data),t.totalPage=s.data.content.totalPage,t.listData=[].concat(l()(t.listData),l()(s.data.content.list))}).catch(function(t){})):(this.status.pullupStatus="complete",setTimeout(function(){t.status.pullupStatus="default"},1e3),console.log("已加载完")),setTimeout(function(){},10))},refresh:function(){var t=this;console.log("刷新"),this.$nextTick(function(){setTimeout(function(){t.$refs.scroller.donePulldown(),t.pullupEnabled&&t.$refs.scroller.enablePullup()},10)})},toDetail:function(t){console.log(21),this.$router.push({path:"/store",query:{id:t}})}}},v={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("section",{staticClass:"near nearby"},[e("vHeader",{attrs:{title:t.className}}),t._v(" "),e("scroller",{ref:"scroller",attrs:{"lock-x":"","scrollbar-y":!1,"use-pullup":"","use-pulldown":""},on:{"on-scroll-bottom":t.loadMore,"on-pulldown-loading":t.refresh,"on-pullup-loading":t.loadMore},model:{value:t.status,callback:function(s){t.status=s},expression:"status"}},[e("div",{staticClass:"white mgt50"},[e("div",{staticClass:"box2 newListData pd10"},[e("flexbox",{attrs:{orient:"vertical"}},t._l(t.listData,function(s,a){return e("flexbox-item",{key:a},[e("div",{staticClass:"mgt10 justify-content-space-between",on:{click:function(e){t.toDetail(s.id)}}},[e("p",[e("img",{attrs:{src:t.urlPic+s.imgLogo}})]),t._v(" "),e("div",{staticClass:"flexg2 listRight"},[e("p",{staticClass:"goodsName txt-black2 fs-14",domProps:{textContent:t._s(s.merchantName)}}),t._v(" "),s.distance?e("i",{staticClass:"distance txt-gray1",domProps:{textContent:t._s(t.disFormat(s.distance))}}):t._e(),t._v(" "),e("div",{staticClass:"rightBtm justify-content-space-between"},[e("div",[e("p",{staticClass:"fs-12 mb5 txt-blue",domProps:{textContent:t._s(s.sellerClassName)}}),t._v(" "),e("rater",{attrs:{disabled:"","font-size":10,"active-color":"#ff4f00",value:s.totalScore}}),e("i",{staticClass:"fs-12 ml5 txt-orange",domProps:{textContent:t._s(t.dotFormat(s.totalScore))}}),t._v(" "),e("p",{staticClass:"txt-gray1 fs-10 location mt5",domProps:{textContent:t._s(s.merchantAddress)}})],1)])])])])}),1)],1)]),t._v(" "),e("div",{staticClass:"xs-plugin-pullup-container xs-plugin-pullup-up",staticStyle:{position:"absolute",width:"100%",height:"40px",bottom:"-20px","text-align":"center"},attrs:{slot:"pullup"},slot:"pullup"},[e("span",{directives:[{name:"show",rawName:"v-show",value:"default"===t.status.pullupStatus,expression:"status.pullupStatus === 'default'"}]}),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:"up"===t.status.pullupStatus,expression:"status.pullupStatus === 'up'"}],staticClass:"pullup-arrow",class:{rotate:"up"===t.status.pullupStatus}},[t._v("↑")]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:"loading"===t.status.pullupStatus,expression:"status.pullupStatus === 'loading'"}]},[e("spinner",{attrs:{type:"ios-small"}})],1),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:"complete"===t.status.pullupStatus,expression:"status.pullupStatus === 'complete'"}]},[t._v("已加载完成")])])])],1)},staticRenderFns:[]};var g=e("C7Lr")(f,v,!1,function(t){e("gmey")},null,null);s.default=g.exports},gmey:function(t,s){}});
//# sourceMappingURL=32.1c1166e41f20b9927a11.js.map