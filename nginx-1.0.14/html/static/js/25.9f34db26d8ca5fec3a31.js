webpackJsonp([25],{HWbp:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("4YfN"),a=s.n(i),n=s("kEOb"),o=s("DeJQ"),r=s("9rMa"),c=s("wSez"),l=(s("6iV/"),n.a,o.a,a()({},Object(r.c)(["token"])),s("6iV/")),p={data:function(){return{serveOrderInfo:{},expressData:{num:"",id:"",name:"请选择物流公司"},expressList:[]}},components:{"v-cell":n.a,"v-tagcon":o.a},computed:a()({},Object(r.c)(["token"])),beforeCreate:function(){document.title="发货"},created:function(){this.serveOrderInfo=JSON.parse(window.localStorage.getItem("serveOrderInfo")),this.getExpressList()},methods:{changeData:function(e){this.expressData.num=e.value},choseExpress:function(e){var t=+e.target.value;-1===t?(this.expressData.name="请选择物流公司",this.expressData.id=""):(this.expressData.name=this.expressList[t].logisticsName,this.expressData.id=this.expressList[t].id)},getExpressList:function(){var e=this;this.$axios.get(this.api.getJuniorExpress,{headers:{Authorization:this.token}}).then(function(t){var s=t.data;1===s.code?e.expressList=s.content||[]:e.showTip(s.message)}).catch(function(t){e.showTip("获取物流公司失败")})},juniorSend:function(){var e=this,t=this.serveOrderInfo.orderNo,s=this.expressData.num,i=this.expressData.id;if(t)if(""!==s)if(""!==i){var a=Object(c.Toast)({message:"发货中...",iconClass:"loading",duration:1e4});this.$axios.post(this.api.juniorSend,l.stringify({order_no:t,logistics_no:s,logistic_id:i}),{headers:{"content-type":"application/x-www-form-urlencoded",Authorization:this.token}}).then(function(t){a.close();var s=t.data;1===s.code?(e.showTip("订单发货成功！",2e3,"ok"),setTimeout(function(){e.$router.go(-2)},2e3)):e.showTip(s.message)}).catch(function(t){a.close(),e.showTip("发货失败，请重试")})}else this.showTip("请选择发货的物流公司");else this.showTip("请输入运单号");else this.showTip("没有获取到订单号")}}},u={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrapper page-juniorgrant"},[s("div",{staticClass:"lay-info"},[s("v-cell",{attrs:{type:"btn",title:"订单号",value:e.serveOrderInfo.orderNo||""}})],1),e._v(" "),s("div",{staticClass:"lay-chose"},[s("v-cell",{attrs:{type:"input",title:"运单号",place:"请填写运单号",pro:"num",iptCon:e.expressData.num},on:{iptChange:e.changeData}}),e._v(" "),s("div",{staticClass:"v-cell-box"},[s("div",{staticClass:"lay-cell"},[s("span",{staticClass:"title"},[e._v("物流公司")]),e._v(" "),s("select",{staticClass:"select",class:{chose:"请选择物流公司"!==e.expressData.name},on:{change:e.choseExpress}},[s("option",{domProps:{value:-1}},[e._v("请选择物流公司")]),e._v(" "),e._l(e.expressList,function(t,i){return s("option",{key:i,domProps:{value:i}},[e._v(e._s(t.logisticsName))])})],2)])])],1),e._v(" "),s("div",{staticClass:"lay-action"},[s("button",{staticClass:"btn-submit",on:{click:e.juniorSend}},[e._v("确定发货")])])])},staticRenderFns:[]};var h=s("C7Lr")(p,u,!1,function(e){s("b3Bm")},null,null);t.default=h.exports},b3Bm:function(e,t){}});
//# sourceMappingURL=25.9f34db26d8ca5fec3a31.js.map