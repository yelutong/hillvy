webpackJsonp([6],{FPeP:function(s,t){s.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB8AAAAfCAMAAAAocOYLAAAAnFBMVEUAAAD/UAD/TwD/TwD/VQD/TwD/TwD/TwD/TwD/TgD/TwD/TwD/TwD/TwD/TwD/TQD/UAD/TwD/TwD/TgD/TwD/TwD/TgD/TwD/TwD/TwD/TwD/TwD/TgD/TQD/TwD/TgD/TwD/TwD/TwD/TwD/TwD/TwD/UAD/TAD/TwD/TgD/TgD/TgD/TgD/TQD/UAD/TgD/TwD/TwD/TgD/TwBX5u5GAAAAM3RSTlMAHfjnBHdDPsfBt6ypUksjFPHZ0c6xpKGMdFYxGgjs3ZGIfHBiSTkNypiBZlxPLCjhu2yAXmBmAAABc0lEQVQoz3WSh26rQBBFx2A6LnRT3Huc2Mk7//9vj40QYOMcaaW5umj2zjLS51xskuw2kj8wAn7ZvLd9cHa3PIHLO/sDPkVhrXCH9gymTTnSOA78BZnIyVu5XyJ7fgZ+zElGKEypYPnqa8wkwS+36CIwGHLFqD4z5alTvfoulnh45YJvmROMh/k+1AyAJRMSecXErkdPdLvOfyUf+ONeJp2ZDLhiNNWRSIbcWTeVpx56yJpSFMs3ryOFKf9wmx+Vyr3oDzjfRSBLjblSAQ/R0bdtxr0Geh1uy7ZWExyRg97tiQ8/07Fqg1ZfHGKpcU0P7HNdpXBrGmXs5EjYqElArN5Nu7c50MTGkoZKZy8+hrR4OISd/CISh4m0jIBpJx+sJceRjoy4p1J8OQek465Bv9sCHiIlfHc9p+23ZgQHVZQhRMbzwlXGBbSiUbkOrNPdYXo6mcXBuIaAtqm65Zi4PGPnc3nibH0ufOcSx7ab7Y/tbf8B6k4uU5hWGTAAAAAASUVORK5CYII="},R7HN:function(s,t){s.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAMAAAAp4XiDAAAAkFBMVEUAAAD/TgD/TwD/UAD/TwD/TwD/TAD/TwD/TgD/TwD//////fz/9/T/h2b/tKP/3NT/8On/9vH/8uz/7eX/+/n/+vj/ybz/5d//n4b/bT3/qpX/k3f/elP/XiP/Vwz/0sj/vqD/hlD/fUL/6d//5dn/v7D/vJ7/sY//q4X/p3//ZR//oHX/m27/kWD/XRX/UQNTHSihAAAACXRSTlMA0MgGbvQb+W971P08AAABkElEQVRIx9XWyXaCMACFYepQe28ghhYZHVvnTu//dsWA0JIaxFX7b1zId0hyEo3jOP1Bb4irGvYGfSfv/g4durvP32EKu+k7A3Rs4PS6kp4z6kpGDjr398nr2rX2sm+SN7a2axBFPxC2JvQbZMKALakGeaRgneuWn9/Jk41Es2khEi+6koRAzDwJhFcSxvrZCMgsA/NrspEyBTIpp0AqZXiJkP6ERfiZR52gaJB9bYDEq0rglYLbBsFK0RclkaySBQnov5vb8kPRvUQE1REmwTPFZfIMk9SrBsTjqhienvr8d6IYmCtmJfP8G5NYB7YsN3PmLZhAnuyYoZfqBVvPTXLcUohqJwNhQfIUKSZ8WTXJSpCVoATUmSww1YYH41SKWkR6BppoTm0C41TWo5IoHi62foyk5VRG8QyY6e07RZJKD8hazksOUJ7FFEWLFjJGNj6PcCNPRbQQWyZx24k5fVdYC4yfvgNbWzYIdsq1ppaf/+YvqQMZdRXDG64KN1xIbrj23HC5yus/XH+Fe8jf8QWBQ2RRhCWftAAAAABJRU5ErkJggg=="},RYr5:function(s,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("HzJ8"),i=e.n(a),o=e("3cXf"),r=e.n(o),n=e("4YfN"),c=e.n(n),d=e("9rMa"),l=(e("wSez"),e("Vi7w")),h=e("pHSk"),p=e("j108"),u=e("inDh"),A=e("4s6/"),g=e("CKVb"),v=e("gpPJ"),x=e("UzLt"),w=e("oFkT"),f=e.n(w),y=e("FPeP"),m=e.n(y),C=(e("6iV/"),A.a,g.a,v.a,x.a,l.a,h.a,p.a,u.a,c()({},Object(d.c)(["token","autoAddress","choseAddress"]),{totalPrice:function(){return this.dotFormat2(this.payPrice)}}),e("6iV/"),{data:function(){return{storeId:this.getUrlParam("storeId"),urlPic:this.api.urlPic,location:m.a,show:!1,list2:["配送到家","到店自取"],send:f.a,demo2:"配送到家",index:0,storeData:"",userAddressId:"",areaId:"",goodsCarts:[],payPrice:0,userCouponIds:[],goodsChannel:1,goodsIntegral:"",isUseIntegral:!1,exchangeObj:"",exchangePic:e("R7HN"),num:"",showAddress:null,goodsBuyInfo:[],goodsTips:""}},components:{"x-switch":A.a,group:g.a,cell:v.a,vHeader:x.a,Swiper:l.a,SwiperItem:h.a,Tab:p.a,TabItem:u.a},computed:c()({},Object(d.c)(["token","autoAddress","choseAddress"]),{totalPrice:function(){return this.dotFormat2(this.payPrice)}}),beforeCreate:function(){document.title="结算"},created:function(){this.getCartList(),this.getStoreData();var s=this.autoAddress,t=this.choseAddress;t?(this.showAddress=t,this.userAddressId=this.showAddress.id,this.areaId=this.showAddress.areaId):s?(this.showAddress=s,this.userAddressId=this.showAddress.id,this.areaId=this.showAddress.areaId):this.getAutoAddress()},methods:{goMap:function(s,t){this.$router.push({path:"/map",query:{title:s,latitude:t.latitude,longitude:t.longitude,address:t.merchantAddress,merchantName:t.merchantName}})},getStoreData:function(){var s=this;this.$axios.get(this.api.sellerstoreData+this.storeId).then(function(t){if(1===t.data.code){var e=t.data.content;s.storeData=e}}).catch(function(s){})},closePickerBox:function(){this.show=!1},showTips:function(){this.show=!0},exchangeData:function(){var s=this,t={goodsCarts:this.goodsCarts,goodsChannel:2,isUseIntegral:1,userCouponIds:this.userCouponIds};this.$axios.post(this.api.orderPriceNew,r()(t),{headers:{Authorization:this.token,"content-type":"application/json"}}).then(function(t){var e=t.data;1===e.code?e.content.exchange&&(s.exchangeObj=e.content):s.showTip("未获取到价格信息")}).catch(function(s){})},getCartList:function(){var s=this;this.$axios.post(this.api.otoGoodsCartList,r()({storeId:this.storeId}),{headers:{"content-type":"application/json",Authorization:this.token}}).then(function(t){var e=t.data;if(console.log(e),1===e.code)if(e.content&&e.content.length>0){s.payPrice=0,s.goodsCarts=[];var a=!0,o=!1,r=void 0;try{for(var n,c=i()(e.content);!(a=(n=c.next()).done);a=!0){var d=n.value;console.log(2);var l=!0,h=!1,p=void 0;try{for(var u,A=i()(d.list);!(l=(u=A.next()).done);l=!0){var g=u.value,v={id:g.id,goodsId:g.goodsId,num:g.goodsCount,name:g.goodsName,price:g.goodsPrice,img:g.goodsImg?s.api.urlPic+g.goodsImg.split(",")[0]:""};s.goodsBuyInfo.push(v),s.goodsCarts.push(g.id),s.payPrice=s.payPrice+g.goodsCount*g.goodsPrice}}catch(s){h=!0,p=s}finally{try{!l&&A.return&&A.return()}finally{if(h)throw p}}}}catch(s){o=!0,r=s}finally{try{!a&&c.return&&c.return()}finally{if(o)throw r}}}else s.payPrice=0;else s.showTip("数据错误")}).catch(function(s){})},getAutoAddress:function(){var s=this;this.$axios.get(this.api.getDefAddrData,{headers:{Authorization:this.token}}).then(function(t){var e=t.data;e.content&&e.content.id&&(s.showAddress=e.content,s.areaId=s.showAddress.areaId,s.userAddressId=s.showAddress.id)})},guid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){var t=16*Math.random()|0;return("x"==s?t:3&t|8).toString(16)})},makeOrder:function(){var s=this,t=this.goodsBuyInfo,e=this.showAddress;if(0!==t.length)if(0!=this.index||e){var a={areaId:this.areaId,channel:2,carts:this.goodsCarts,isUseIntegral:this.isUseIntegral,remark:this.goodsTips,userAddressId:this.userAddressId,sendType:0==this.index?1:4,uuid:this.guid()};this.$axios.post(this.api.otoOrderform,r()(a),{headers:{Authorization:this.token,"content-type":"application/json"}}).then(function(t){var e=t.data;if(1===e.code){var a=e.content.orderNumber;s.$router.push({path:"/store/otoPay",query:{orderNumbers:a,payPrice:s.dotFormat2(s.payPrice)}})}else s.showTip(e.msg)}).catch(function(t){s.showTip("下单失败，请您稍后重试")})}else this.showTip("请选择收货地址");else this.showTip("未获取到商品信息")}}}),I={render:function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"wrapper page-buy"},[e("vHeader",{attrs:{title:"填写订单"}}),s._v(" "),e("div",{staticClass:"mb10 mt50 fillTop"},[e("tab",{attrs:{"line-width":0,"active-color":"#fc378c"},model:{value:s.index,callback:function(t){s.index=t},expression:"index"}},s._l(s.list2,function(t,a){return e("tab-item",{key:a,staticClass:"vux-center",attrs:{selected:s.demo2===t},on:{click:function(e){s.demo2=t}}},[s._v(s._s(t))])}),1),s._v(" "),e("swiper",{attrs:{height:"110px","show-dots":!1},model:{value:s.index,callback:function(t){s.index=t},expression:"index"}},s._l(s.list2,function(t,a){return e("swiper-item",{key:a},[0==a?e("div",{staticClass:"tab-swiper vux-center"},[e("div",{staticClass:"w100 white pSend mb10 justify-content-space-between"},[e("div",{staticClass:"horizontal-view"},[e("span",{staticClass:"send left"},[e("img",{attrs:{src:s.send}})]),s._v(" "),e("span",{staticClass:"fs-14 left"},[s._v("商家配送"),e("i",{staticClass:"txt-orange fs-12 ml5"},[s._v("配送费0.00元")])])]),s._v(" "),e("div",[e("i",{staticClass:"ico i-cks checked"})])]),s._v(" "),e("router-link",{staticClass:"lay-address white ",attrs:{to:{path:"/mine/addresses",query:{from:"goods"}}}},[e("i",{staticClass:"ico i-map"}),s._v(" "),e("div",{staticClass:"adress"},[s.showAddress?[e("span",{staticClass:"name-phone lh-20 fs-14"},[s._v(s._s(s.showAddress.userName)+" "+s._s(s.showAddress.phone))]),s._v(" "),e("span",{staticClass:"adres fs-12 txt-gray"},[s._v(s._s(s.showAddress.areaInfo)+" "+s._s(s.showAddress.address))])]:e("span",{staticClass:"chose"},[s._v("选择收货地址")])],2),s._v(" "),e("i",{staticClass:"ico i-aow"})])],1):e("div",{staticClass:"tab-swiper vux-center"},[e("div",{staticClass:"item local2 white local w100 justify-content-space-between",on:{click:s.showTips}},[e("div",{staticClass:"img-box align-items-start"},[e("div",{staticClass:"mr10"},[e("img",{staticClass:"img",attrs:{src:s.storeData.imgLogo?s.urlPic+s.storeData.imgLogo:""}})]),s._v(" "),e("div",{staticClass:"info-box vertical-view"},[e("i",{staticClass:"fs-14 txt-black-real",domProps:{textContent:s._s(s.storeData.merchantName)}}),s._v(" "),e("i",{staticClass:"fs-12 txt-gray1 mt5",domProps:{textContent:s._s("联系电话："+s.storeData.merchantServicePhone)}}),s._v(" "),e("i",{staticClass:"fs-12 txt-gray1",domProps:{textContent:s._s(s.storeData.merchantAddress)}})])]),s._v(" "),e("div",{staticClass:"locationOd"},[e("img",{attrs:{src:s.location}})])])])])}),1)],1),s._v(" "),e("div",{staticClass:"lay-goods white mb10 pd15"},s._l(s.goodsBuyInfo,function(t,a){return e("div",{key:a,staticClass:"item"},[e("div",{staticClass:"img-box"},[e("img",{staticClass:"img",attrs:{src:t.img}})]),s._v(" "),e("div",{staticClass:"info-box"},[e("div",{staticClass:"title"},[s._v("\n          "+s._s(t.name)+"\n        ")]),s._v(" "),e("div",{staticClass:"price-num"},[e("span",{staticClass:"price"},[s._v("￥"+s._s(t.price))]),s._v(" "),e("span",{staticClass:"fs-12"},[s._v("x "+s._s(t.num))])])])])}),0),s._v(" "),s.exchangeObj?e("group",[e("div",{on:{click:s.showTips}},[e("cell",{attrs:{title:s.exchangeObj&&s.exchangeObj.discountedPrice?"可使用兑换积分"+s.exchangeObj.discountedPrice+".00":"可使用兑换积分0.00","is-link":""}},[e("img",{staticStyle:{display:"block","margin-right":"5px",width:"25px",height:"25px"},attrs:{slot:"icon",src:s.exchangePic},slot:"icon"})])],1)]):s._e(),s._v(" "),s.storeData?e("div",{staticClass:"picker-new"},[e("div",{class:s.show?"picker-mask show":"picker-mask",on:{click:s.closePickerBox}}),s._v(" "),e("div",{class:s.show?"picker-panel show":"picker-panel"},[e("div",{staticClass:"h45 vux-1px-b relative titleEx"},[s._v("选择地图"),e("i",{staticClass:"txt-gray",on:{click:s.closePickerBox}},[s._v("×")])]),s._v(" "),e("div",{staticClass:"groupEx mb10 pda15 vertical-view"},[e("span",{staticClass:"fs-14 h40",on:{click:function(t){s.goMap("腾讯地图",s.storeData)}}},[s._v("腾讯地图")]),s._v(" "),e("span",{staticClass:"fs-14 h40",on:{click:function(t){s.goMap("百度地图",s.storeData)}}},[s._v("百度地图")]),s._v(" "),e("span",{staticClass:"fs-14 h40",on:{click:function(t){s.goMap("高德地图",s.storeData)}}},[s._v("高德地图")])])])]):s._e(),s._v(" "),s.exchangeObj?e("div",{staticClass:"picker-new"},[e("div",{class:s.show?"picker-mask show":"picker-mask",on:{click:s.closePickerBox}}),s._v(" "),e("div",{class:s.show?"picker-panel show":"picker-panel"},[e("div",{staticClass:"h45 vux-1px-b relative titleEx"},[s._v("兑换积分"),e("i",{staticClass:"txt-gray",on:{click:s.closePickerBox}},[s._v("×")])]),s._v(" "),e("div",{staticClass:"groupEx mb10 justify-content-space-between pda15"},[e("span",{staticClass:"left",domProps:{textContent:s._s("可使用兑换积分"+s.exchangeObj.exchange.goodsIntegral*s.exchangeObj.goodsCount)}}),s._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:s.isUseIntegral,expression:"isUseIntegral"}],staticClass:"check goods-check goodsCheck",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(s.isUseIntegral)?s._i(s.isUseIntegral,null)>-1:s.isUseIntegral},on:{change:function(t){var e=s.isUseIntegral,a=t.target,i=!!a.checked;if(Array.isArray(e)){var o=s._i(e,null);a.checked?o<0&&(s.isUseIntegral=e.concat([null])):o>-1&&(s.isUseIntegral=e.slice(0,o).concat(e.slice(o+1)))}else s.isUseIntegral=i}}})])])]):s._e(),s._v(" "),e("div",{staticClass:"lay-tips white"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:s.goodsTips,expression:"goodsTips"}],staticClass:"txa",attrs:{placeholder:"请填写备注",maxlength:"200"},domProps:{value:s.goodsTips},on:{input:function(t){t.target.composing||(s.goodsTips=t.target.value)}}})]),s._v(" "),e("div",{staticClass:"lay-action fix-btom pay-act-btom"},[e("div",{staticClass:"price-info flex1"},[e("span",{staticClass:"tag ml15"},[s._v("合计：")]),s._v(" "),e("span",{staticClass:"total",model:{value:s.num,callback:function(t){s.num=t},expression:"num"}},[s._v("￥"+s._s(s.totalPrice))]),s._v(" "),e("span",{staticClass:"tip"},[s._v(" (含运费)")])]),s._v(" "),e("button",{staticClass:"btn-submit per40",on:{click:s.makeOrder}},[s._v("支付订单")])])],1)},staticRenderFns:[]};var k=e("C7Lr")(C,I,!1,function(s){e("zbl+")},null,null);t.default=k.exports},oFkT:function(s,t){s.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEsAAAA8CAMAAAAZt7ehAAAAh1BMVEUAAACMjIyMjIyNjY2GhoaMjIyMjIyNjY2MjIyMjIyMjIyMjIyMjIyMjIyKioqMjIyLi4uNjY2MjIyPj4+MjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyLi4uLi4uMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIxB2/SsAAAALHRSTlMA+OcHBNf7ZfHzSaqjrxtDDTSIJJwo48Xsy7WPLBXQlU85IVU9XGLevGx9c/HFsZkAAAK8SURBVFjD7ZfZsqIwFEWBABJmZEaGyCz4/9/XiQKX0Ng3Sj90dd31aFHLc5KdQ+B+OIyYWe2Jhaa2v3MBp+gigQHpUn7rqjV4Z4HX3b/mUgrzW9dVZ3NFXl2W7kSZ7a+XrjC5YFwM54nL0OzuY1qwuWQYdMGMlNAWmwBsx8MuNpkyAaEQrk1mjSqEkIrGnmfbR8nw9CeaVoyrzspbHz7JozsTkY6chbRcVXWL5Zk7G8LFFL/4qso85Vgh8w9kRhedr0V1y3kcvlgj9IHM5lqdIbpBrNJbi3BKIGuPO6rTQ6XVQMQA1nwpRuXU+L+djFLxZFcsMGXVY8xqlMdxnMf6dVFlpxBXBXVLXM4jcbEToEXVEpVizCr2sy0rnURI6nkHW9KgouEG33Up/Q1VTdOo0xa4jwZ5onrbJRQ+AMC2wdTRSFRRogJ6fn2Urxhilaba9Cz8LF8CbjCpSFXHXZ18h+eS+8zlWS7Gd7NnLRKPXZSePV8w9x7j+dym4guXyDxXoRAImAAv0uLKOIr0vRkNo35x8Z7lu/6Cm1YGZJzRmofRvdGZe5SlRKNgnF9kGvgpxjftee23EBFjJpbFoV00rPn6N11FKc4cdSlJa6kEpKb2EdcyCwnxxZ9dxwmvR+uKpFx6kHvp0fXqx6ohtI2VHd7H1CZk2XNMC/KBurySnqt7dxGZp3j1iLK5R3sGJue3dzTNoNCSjpYpoYZ/Henc1yrmHG3Of6VuqAyeqkoacEotH9BDFGCQRD94y8CG7KxQlScWwIjc71ypSxIk14ENoM3pU+1yLzDHbn3VGEri2r4D1k3Glf3KJaa6siqr3qndrlYbFP3powogA8rT6yBBNrd/dXwGQ5aDwgHcazK1CAXIQyEsULZfu9nqeYRD1SWDQxe+xa6HJJfyZKC+L2kZKnpJCvUbjsIP/y+/AAWtesy+/09gAAAAAElFTkSuQmCC"},"zbl+":function(s,t){}});
//# sourceMappingURL=6.bc8a7adf0dd889bb1923.js.map