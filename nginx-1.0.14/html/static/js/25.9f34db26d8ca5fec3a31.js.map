{"version":3,"sources":["webpack:///./src/views/mine/juniorgrant.vue","webpack:///./src/views/mine/juniorgrant.vue?ecab","webpack:///./src/views/mine/juniorgrant.vue?652d"],"names":["qs","require","vCell","vTagcon","computed","mapState","mine_juniorgrant","data","serveOrderInfo","expressData","num","id","name","expressList","components","v-cell","v-tagcon","beforeCreate","document","title","created","this","JSON","parse","window","localStorage","getItem","getExpressList","methods","changeData","value","choseExpress","index","target","logisticsName","_this","$axios","get","api","getJuniorExpress","headers","Authorization","token","then","res","resData","code","content","showTip","message","catch","juniorSend","_this2","orderNo","expressNum","expressId","loading","Toast","iconClass","duration","post","stringify","order_no","logistics_no","logistic_id","content-type","close","setTimeout","$router","go","views_mine_juniorgrant","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","type","_v","place","pro","iptCon","on","iptChange","class","chose","change","domProps","_l","item","key","_s","click","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/25.9f34db26d8ca5fec3a31.js","sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport vCell from \"@/components/v-cell\";\nimport vTagcon from \"@/components/v-tagcon\";\nimport {\n  mapState\n} from \"vuex\";\nimport {\n  Toast\n} from \"mint-ui\";\nconst qs = require(\"qs\");\nexport default {\n  data() {\n    return {\n      serveOrderInfo: {},\n      expressData: {\n        num: '',\n        id: '',\n        name: '请选择物流公司'\n      },\n      expressList: []\n    };\n  },\n  components: {\n    \"v-cell\": vCell,\n    \"v-tagcon\": vTagcon\n  },\n  computed: {\n    ...mapState([\"token\"])\n  },\n  beforeCreate() {\n    document.title = \"发货\";\n  },\n  created() {\n    // 从缓存拿订单信息\n    this.serveOrderInfo = JSON.parse(window.localStorage.getItem('serveOrderInfo'));\n    // 获取物流列表\n    this.getExpressList();\n  },\n  methods: {\n    // 父子通信\n    changeData(data) {\n      this.expressData.num = data.value;\n    },\n    // 选择物流\n    choseExpress(data) {\n      const index = +data.target.value;\n      if (index === -1) {\n        this.expressData.name = '请选择物流公司';\n        this.expressData.id = '';\n      } else {\n        this.expressData.name = this.expressList[index].logisticsName;\n        this.expressData.id = this.expressList[index].id;\n      }\n    },\n    // 获取物流列表\n    getExpressList() {\n      this.$axios.get(this.api.getJuniorExpress, {\n        headers: {\n          \"Authorization\": this.token\n        },\n      }).then(res => {\n        const resData = res.data;\n        if (resData.code !== 1) {\n          this.showTip(resData.message);\n          return;\n        }\n        this.expressList = resData.content || [];\n      }).catch(res => {\n        this.showTip('获取物流公司失败');\n      });\n    },\n    // 服务点接单发货\n    juniorSend() {\n      const orderNo = this.serveOrderInfo.orderNo\n      const expressNum = this.expressData.num;\n      const expressId = this.expressData.id;\n      if (!orderNo) {\n        this.showTip('没有获取到订单号');\n        return;\n      }\n      if (expressNum === '') {\n        this.showTip('请输入运单号');\n        return;\n      }\n      if (expressId === '') {\n        this.showTip('请选择发货的物流公司');\n        return;\n      }\n      // 拿到所需参数\n      const loading = Toast({\n        message: \"发货中...\",\n        iconClass: \"loading\",\n        duration: 10000\n      });\n      this.$axios.post(this.api.juniorSend, qs.stringify({\n        order_no: orderNo,\n        logistics_no: expressNum,\n        logistic_id: expressId\n      }), {\n        headers: {\n          \"content-type\": \"application/x-www-form-urlencoded\",\n          \"Authorization\": this.token\n        }\n      }).then(res => {\n        loading.close();\n        const resData = res.data;\n        if (resData.code !== 1) {\n          this.showTip(resData.message);\n          return;\n        }\n        // 成功之后返回列表\n        this.showTip('订单发货成功！', 2000, 'ok');\n        setTimeout(() => {\n          this.$router.go(-2);\n        }, 2000);\n      }).catch(res => {\n        loading.close();\n        this.showTip('发货失败，请重试');\n      });\n    }\n  }\n};\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/views/mine/juniorgrant.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"wrapper page-juniorgrant\"},[_c('div',{staticClass:\"lay-info\"},[_c('v-cell',{attrs:{\"type\":\"btn\",\"title\":\"订单号\",\"value\":_vm.serveOrderInfo.orderNo || ''}})],1),_vm._v(\" \"),_c('div',{staticClass:\"lay-chose\"},[_c('v-cell',{attrs:{\"type\":\"input\",\"title\":\"运单号\",\"place\":\"请填写运单号\",\"pro\":\"num\",\"iptCon\":_vm.expressData.num},on:{\"iptChange\":_vm.changeData}}),_vm._v(\" \"),_c('div',{staticClass:\"v-cell-box\"},[_c('div',{staticClass:\"lay-cell\"},[_c('span',{staticClass:\"title\"},[_vm._v(\"物流公司\")]),_vm._v(\" \"),_c('select',{staticClass:\"select\",class:{chose:_vm.expressData.name!=='请选择物流公司'},on:{\"change\":_vm.choseExpress}},[_c('option',{domProps:{\"value\":-1}},[_vm._v(\"请选择物流公司\")]),_vm._v(\" \"),_vm._l((_vm.expressList),function(item,index){return _c('option',{key:index,domProps:{\"value\":index}},[_vm._v(_vm._s(item.logisticsName))])})],2)])])],1),_vm._v(\" \"),_c('div',{staticClass:\"lay-action\"},[_c('button',{staticClass:\"btn-submit\",on:{\"click\":_vm.juniorSend}},[_vm._v(\"确定发货\")])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-88b02d82\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vux-loader@1.2.9@vux-loader/src/before-template-compiler-loader.js!./node_modules/_vux-loader@1.2.9@vux-loader/src/template-loader.js!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/mine/juniorgrant.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-88b02d82\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!px2rem-loader?{\\\"remUnit\\\":50}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vux-loader@1.2.9@vux-loader/src/style-loader.js!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./juniorgrant.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vux-loader@1.2.9@vux-loader/src/script-loader.js!../../../node_modules/_vux-loader@1.2.9@vux-loader/src/script-loader.js!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./juniorgrant.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vux-loader@1.2.9@vux-loader/src/script-loader.js!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./juniorgrant.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-88b02d82\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vux-loader@1.2.9@vux-loader/src/before-template-compiler-loader.js!../../../node_modules/_vux-loader@1.2.9@vux-loader/src/template-loader.js!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./juniorgrant.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/mine/juniorgrant.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}