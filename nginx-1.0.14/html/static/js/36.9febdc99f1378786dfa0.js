webpackJsonp([36],{"9nr8":function(e,t){},LxCL:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("3cXf"),n=s.n(i),o=s("4YfN"),a=s.n(o),d=s("9rMa"),r=(s("wSez"),s("UzLt")),h=(s("6iV/"),r.a,a()({},Object(d.c)(["token","userId","userPhone","parentId"])),a()({},Object(d.b)(["atnUserId","atnWeChatInfo"]),{next:function(){this.oldSmsCode&&4==this.oldSmsCode.length?(this.firstStep=!1,this.hasSend=!1,this.time=60):this.showTip("请输入验证码")},getCode:function(){var e=this;""!=this.newUsername&&11===this.newUsername.length?this.$axios.get(this.api.getFindPwdCode+this.newUsername).then(function(t){var s=t.data;1==s.code?(e.hasSend=!0,e.showTip("验证码已发送到您的手机，请注意查收"),e.countDownTime()):e.showTip(s.msg)}).catch(function(t){e.showTip("获取验证码失败，请稍后重试")}):this.showTip("手机号码格式不正确")},getOldCode:function(){var e=this;this.$axios.get(this.api.getFindPwdCode+this.userPhone).then(function(t){var s=t.data;1==s.code?(e.hasSend=!0,e.showTip("验证码已发送到您的手机，请注意查收"),e.countDownTime()):e.showTip(s.msg)}).catch(function(t){e.showTip("获取验证码失败，请稍后重试")})},countDownTime:function(){var e=this;!function t(){var s=setTimeout(function(){e.time<=0?(clearTimeout(s),e.hasSend=!1,e.time=60):(e.time-=1,t())},1e3)}()},updatePhone:function(){var e=this;if(11===this.newUsername.length)if(""!==this.newSmsCode){var t={newSmsCode:this.newSmsCode,newUsername:this.newUsername,oldSmsCode:this.oldSmsCode};this.$axios.post(this.api.phoneUpdate,n()(t),{headers:{"content-type":"application/json"}}).then(function(t){var s=t.data;if(1===s.code){e.showTip("修改成功");var i=e;setTimeout(function(){i.$router.push("/mine")},1e3),console.log(s)}else 403==s.code?(e.showTip("登录超时，请重新登录"),e.$router.push({name:"login",params:{url:window.location.href}})):e.showTip(s.msg)}).catch(function(t){loading.close(),e.showTip("修改失败，请稍后重试")})}else this.showTip("请输入验证码");else this.showTip("手机号码格式不正确")}}),s("6iV/"),{data:function(){return{newUsername:"",oldSmsCode:"",newSmsCode:"",firstStep:!0,time:60,hasSend:!1,typeSet:"password",statusShow:!0}},components:{vHeader:r.a},computed:a()({},Object(d.c)(["token","userId","userPhone","parentId"])),beforeCreate:function(){document.title="注册"},created:function(){document.body.classList.add("bg-white")},destroyed:function(){document.body.classList.remove("bg-white")},methods:a()({},Object(d.b)(["atnUserId","atnWeChatInfo"]),{next:function(){this.oldSmsCode&&4==this.oldSmsCode.length?(this.firstStep=!1,this.hasSend=!1,this.time=60):this.showTip("请输入验证码")},getCode:function(){var e=this;""!=this.newUsername&&11===this.newUsername.length?this.$axios.get(this.api.getFindPwdCode+this.newUsername).then(function(t){var s=t.data;1==s.code?(e.hasSend=!0,e.showTip("验证码已发送到您的手机，请注意查收"),e.countDownTime()):e.showTip(s.msg)}).catch(function(t){e.showTip("获取验证码失败，请稍后重试")}):this.showTip("手机号码格式不正确")},getOldCode:function(){var e=this;this.$axios.get(this.api.getFindPwdCode+this.userPhone).then(function(t){var s=t.data;1==s.code?(e.hasSend=!0,e.showTip("验证码已发送到您的手机，请注意查收"),e.countDownTime()):e.showTip(s.msg)}).catch(function(t){e.showTip("获取验证码失败，请稍后重试")})},countDownTime:function(){var e=this;!function t(){var s=setTimeout(function(){e.time<=0?(clearTimeout(s),e.hasSend=!1,e.time=60):(e.time-=1,t())},1e3)}()},updatePhone:function(){var e=this;if(11===this.newUsername.length)if(""!==this.newSmsCode){var t={newSmsCode:this.newSmsCode,newUsername:this.newUsername,oldSmsCode:this.oldSmsCode};this.$axios.post(this.api.phoneUpdate,n()(t),{headers:{"content-type":"application/json"}}).then(function(t){var s=t.data;if(1===s.code){e.showTip("修改成功");var i=e;setTimeout(function(){i.$router.push("/mine")},1e3),console.log(s)}else 403==s.code?(e.showTip("登录超时，请重新登录"),e.$router.push({name:"login",params:{url:window.location.href}})):e.showTip(s.msg)}).catch(function(t){loading.close(),e.showTip("修改失败，请稍后重试")})}else this.showTip("请输入验证码");else this.showTip("手机号码格式不正确")}})}),c={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrapper white page-bind"},[s("vHeader",{attrs:{title:"修改用户名",to:"/mine/set"}}),e._v(" "),e.firstStep?s("div",{staticClass:"item-bind"},[s("i",{staticClass:"ico i-ver"}),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.oldSmsCode,expression:"oldSmsCode",modifiers:{trim:!0}}],staticClass:"ipt",attrs:{type:"number",placeholder:"请输入验证码",maxlength:"11"},domProps:{value:e.oldSmsCode},on:{input:function(t){t.target.composing||(e.oldSmsCode=t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),e._v(" "),e.hasSend?e._e():s("button",{staticClass:"btn-submit btn-code",on:{click:e.getOldCode}},[e._v("获取验证码")]),e._v(" "),e.hasSend?s("div",{staticClass:"cut-time"},[e._v("剩余 "+e._s(e.time)+" s")]):e._e()]):e._e(),e._v(" "),e.firstStep?e._e():s("div",{staticClass:"item-bind"},[s("i",{staticClass:"ico i-person"}),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.newUsername,expression:"newUsername",modifiers:{trim:!0}}],staticClass:"ipt",attrs:{type:"number",placeholder:"请输入新手机号",maxlength:"11"},domProps:{value:e.newUsername},on:{input:function(t){t.target.composing||(e.newUsername=t.target.value.trim())},blur:function(t){e.$forceUpdate()}}})]),e._v(" "),e.firstStep?e._e():s("div",{staticClass:"item-bind"},[s("i",{staticClass:"ico i-ver"}),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.newSmsCode,expression:"newSmsCode",modifiers:{trim:!0}}],staticClass:"ipt",attrs:{type:"number",placeholder:"请输入验证码",maxlength:"11"},domProps:{value:e.newSmsCode},on:{input:function(t){t.target.composing||(e.newSmsCode=t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),e._v(" "),e.hasSend?e._e():s("button",{staticClass:"btn-submit btn-code",on:{click:e.getCode}},[e._v("获取验证码")]),e._v(" "),e.hasSend?s("div",{staticClass:"cut-time"},[e._v("剩余 "+e._s(e.time)+" s")]):e._e()]),e._v(" "),e.firstStep?s("button",{staticClass:"btn-submit btn-bind",on:{click:e.next}},[e._v("下一步")]):e._e(),e._v(" "),e.firstStep?e._e():s("button",{staticClass:"btn-submit btn-bind",on:{click:e.updatePhone}},[e._v("确 认")])],1)},staticRenderFns:[]};var m=s("C7Lr")(h,c,!1,function(e){s("9nr8")},null,null);t.default=m.exports}});
//# sourceMappingURL=36.9febdc99f1378786dfa0.js.map